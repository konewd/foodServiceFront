(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96363,71891,94685,e=>{"use strict";e.i(24418);var t=e.i(79946),r=e.i(18924),i=e.i(6756),a=e.i(11387),o=e.i(92849);let n=(0,e.i(27040).default)();var l=e.i(97120);function s(e){let{theme:t,name:r,props:i}=e;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?(0,l.default)(t.components[r].defaultProps,i):i}e.s(["default",()=>s],71891);var d=e.i(90623);function c({props:e,name:t,defaultTheme:r,themeId:i}){let a=(0,d.default)(r);return i&&(a=a[i]||a),s({theme:a,name:t,props:e})}e.s(["default",()=>c],94685);var h=e.i(40823),p=e.i(18634),u=e.i(33181),f=e.i(88715),g=e.i(81738);let y=(0,p.default)(),x=n("div",{name:"MuiStack",slot:"Root"});function v(e){return c({props:e,name:"MuiStack",defaultTheme:y})}let m=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...(0,u.handleBreakpoints)({theme:t},(0,u.resolveBreakpointValues)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let a=(0,f.createUnarySpacing)(t),o=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),n=(0,u.resolveBreakpointValues)({values:e.direction,base:o}),l=(0,u.resolveBreakpointValues)({values:e.spacing,base:o});"object"==typeof n&&Object.keys(n).forEach((e,t,r)=>{if(!n[e]){let i=t>0?n[r[t-1]]:"column";n[e]=i}}),r=(0,i.default)(r,(0,u.handleBreakpoints)({theme:t},l,(t,r)=>e.useFlexGap?{gap:(0,f.getValue)(a,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[r?n[r]:e.direction]}`]:(0,f.getValue)(a,t)}}))}return(0,u.mergeBreakpointsInOrder)(t.breakpoints,r)};var b=e.i(13959),j=e.i(60076);let C=function(e={}){let{createStyledComponent:i=x,useThemeProps:n=v,componentName:l="MuiStack"}=e,s=i(m);return t.forwardRef(function(e,i){let d,c=n(e),{component:p="div",direction:u="column",spacing:f=0,divider:y,children:x,className:v,useFlexGap:m=!1,...b}=(0,h.extendSxProp)(c),j=(0,o.default)({root:["root"]},e=>(0,a.default)(l,e),{});return(0,g.jsx)(s,{as:p,ownerState:{direction:u,spacing:f,useFlexGap:m},ref:i,className:(0,r.default)(j.root,v),...b,children:y?(d=t.Children.toArray(x).filter(Boolean)).reduce((e,r,i)=>(e.push(r),i<d.length-1&&e.push(t.cloneElement(y,{key:`separator-${i}`})),e),[]):x})})}({createStyledComponent:(0,b.default)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,j.useDefaultProps)({props:e,name:"MuiStack"})});e.s(["Stack",0,C],96363)},33156,e=>{"use strict";var t=e.i(12598),r=e.i(11387);function i(e){return(0,r.default)("MuiDivider",e)}let a=(0,t.default)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);e.s(["default",0,a,"getDividerUtilityClass",()=>i])},30204,e=>{"use strict";var t=e.i(81738),r=e.i(79946),i=e.i(37003),a=e.i(15116),o=e.i(78440),n=e.i(96363),l=e.i(56357),s=e.i(282),d=e.i(40207);e.i(24418);var c=e.i(18924),h=e.i(92849),p=e.i(42469),u=e.i(54050),f=e.i(60076),g=e.i(33156);let y=(0,p.styled)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((0,u.default)(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&"vertical"!==e.orientation,style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>"vertical"===e.orientation&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>"right"===e.textAlign&&"vertical"!==e.orientation,style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>"left"===e.textAlign&&"vertical"!==e.orientation,style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),x=(0,p.styled)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((0,u.default)(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),v=r.forwardRef(function(e,r){let i=(0,f.useDefaultProps)({props:e,name:"MuiDivider"}),{absolute:a=!1,children:o,className:n,orientation:l="horizontal",component:s=o||"vertical"===l?"div":"hr",flexItem:d=!1,light:p=!1,role:u="hr"!==s?"separator":void 0,textAlign:v="center",variant:m="fullWidth",...b}=i,j={...i,absolute:a,component:s,flexItem:d,light:p,orientation:l,role:u,textAlign:v,variant:m},C=(e=>{let{absolute:t,children:r,classes:i,flexItem:a,light:o,orientation:n,textAlign:l,variant:s}=e;return(0,h.default)({root:["root",t&&"absolute",s,o&&"light","vertical"===n&&"vertical",a&&"flexItem",r&&"withChildren",r&&"vertical"===n&&"withChildrenVertical","right"===l&&"vertical"!==n&&"textAlignRight","left"===l&&"vertical"!==n&&"textAlignLeft"],wrapper:["wrapper","vertical"===n&&"wrapperVertical"]},g.getDividerUtilityClass,i)})(j);return(0,t.jsx)(y,{as:s,className:(0,c.default)(C.root,n),role:u,ref:r,ownerState:j,"aria-orientation":"separator"===u&&("hr"!==s||"vertical"===l)?l:void 0,...b,children:o?(0,t.jsx)(x,{className:C.wrapper,ownerState:j,children:o}):null})});v&&(v.muiSkipListHighlight=!0);var m=e.i(61854),b=e.i(49302),j=e.i(97240),C=e.i(58121),C=C,w=e.i(5077),T=e.i(15962),S=e.i(50229),k=e.i(38080),R=e.i(95056),B=e.i(94679),D=e.i(77220);function E(e,t){[...t].reverse().forEach(r=>{let i=e.getVariant(r);i&&(0,B.setTarget)(e,i),e.variantChildren&&e.variantChildren.forEach(e=>{E(e,t)})})}function V(){let e=!1,t=new Set,r={subscribe:e=>(t.add(e),()=>void t.delete(e)),start(r,i){(0,R.invariant)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let a=[];return t.forEach(e=>{a.push((0,D.animateVisualElement)(e,r,{transitionOverride:i}))}),Promise.all(a)},set:r=>((0,R.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{var t,i;t=e,Array.isArray(i=r)?E(t,i):"string"==typeof i?E(t,[i]):(0,B.setTarget)(t,i)})),stop(){t.forEach(e=>{e.values.forEach(e=>e.stop())})},mount:()=>(e=!0,()=>{e=!1,r.stop()})};return r}let A=function(){let e=(0,S.useConstant)(V);return(0,k.useIsomorphicLayoutEffect)(e.mount,[]),e},W=(0,e.i(54624).default)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function I(){let[e,c]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[u,f]=(0,r.useState)([]),[g,y]=(0,r.useState)(!1),[x,S]=(0,r.useState)(!1),[k,R]=(0,r.useState)(!1),[B,D]=(0,r.useState)(0),E=(0,r.useRef)(0),V=(0,r.useRef)(!1),I=A(),L=async()=>{try{let e=await i.default.get("http://localhost:3001/end");c(e.data)}catch(e){console.error("Error obteniendo resumen:",e)}},M=async()=>{p(!0);try{await i.default.post("http://localhost:3001/end/close"),await L(),alert("DÃ­a cerrado correctamente")}catch(e){console.error("Error cerrando dÃ­a:",e),alert("Error cerrando dÃ­a")}finally{p(!1)}},$=async()=>{S(!0);try{let e=await i.default.get("http://localhost:3001/end/day");f(e.data)}catch(e){console.error("Error obteniendo ventas del dÃ­a:",e),f([])}finally{S(!1)}};(0,r.useEffect)(()=>{(async()=>{p(!0),await L(),p(!1)})()},[]);let N=async()=>{R(!0);try{await L()}finally{R(!1),I.start({y:0,transition:{type:"spring",stiffness:300,damping:30}}),D(0)}};return h?(0,t.jsx)(a.Box,{sx:{bgcolor:"#121212",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:(0,t.jsx)(d.CircularProgress,{color:"inherit"})}):e?(0,t.jsxs)(a.Box,{sx:{p:4,bgcolor:"#0a0a0a",color:"#fff",minHeight:"100vh",overflow:"hidden",WebkitOverflowScrolling:"touch"},onTouchStart:e=>{0===window.scrollY&&(E.current=e.touches[0].clientY,V.current=!0)},onTouchMove:e=>{if(!V.current)return;let t=e.touches[0].clientY-E.current;if(t>0){let e=t>140?140:t;D(e),I.start({y:e,transition:{type:"spring",stiffness:300,damping:30}})}},onTouchEnd:()=>{V.current&&(V.current=!1,B>70?N():(I.start({y:0,transition:{type:"spring",stiffness:300,damping:30}}),D(0)))},children:[(0,t.jsxs)(a.Box,{sx:{height:B,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",mb:1},children:[!k&&B>0&&(0,t.jsx)(o.Typography,{children:B>70?"Suelte para refrescar":"Deslice hacia abajo"}),k&&(0,t.jsx)(d.CircularProgress,{size:20,color:"inherit"})]}),(0,t.jsxs)(T.motion.div,{animate:I,children:[(0,t.jsx)(o.Typography,{variant:"h4",fontWeight:"bold",mb:4,children:"ğŸ“Š Resumen del DÃ­a"}),(0,t.jsxs)(n.Stack,{spacing:3,children:[(0,t.jsx)(l.Card,{sx:{bgcolor:"#1e1e1e",borderRadius:3},children:(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)(o.Typography,{variant:"h6",fontWeight:"bold",children:"Ventas"}),(0,t.jsx)(v,{sx:{my:1}}),(0,t.jsxs)(o.Typography,{children:["ğŸ’° Total ingresos: $",Number(e.totalVentas||0).toFixed(2)]}),(0,t.jsxs)(o.Typography,{children:["ğŸ›’ Total productos vendidos: ",e.totalProductosVendidos??0]}),(0,t.jsxs)(o.Typography,{children:["ğŸ”¥ Producto mÃ¡s vendido: ",e.productoMasVendido||"-"]}),(0,t.jsx)(a.Box,{mt:2,children:(0,t.jsx)(w.Button,{variant:"contained",onClick:()=>{y(!0),$()},children:"Ver ventas del dÃ­a"})})]})}),(0,t.jsx)(P,{title:"Inventario Inicial",data:e.inventarioInicial||[],color:"#4caf50"}),(0,t.jsx)(P,{title:"Inventario Final",data:e.inventarioFinal||[],color:"#ff9800"}),(0,t.jsx)(l.Card,{sx:{bgcolor:"#1e1e1e",borderRadius:3},children:(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)(o.Typography,{variant:"h6",fontWeight:"bold",children:"Cerrar dÃ­a"}),(0,t.jsx)(v,{sx:{my:1}}),!e.yaTieneCierre&&(0,t.jsx)(w.Button,{variant:"contained",color:"warning",disabled:h,onClick:M,children:"Cerrar el dÃ­a"}),e.yaTieneCierre&&(0,t.jsx)(o.Typography,{color:"gray",children:"âœ… Este dÃ­a ya tiene cierre registrado"})]})})]})]}),(0,t.jsxs)(m.Dialog,{open:g,onClose:()=>y(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{bgcolor:"#1e1e1e",color:"#fff",borderRadius:3}},children:[(0,t.jsxs)(b.DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Ventas del dÃ­a",(0,t.jsx)(C.default,{color:"inherit",onClick:()=>y(!1),children:(0,t.jsx)(W,{})})]}),(0,t.jsx)(j.DialogContent,{dividers:!0,sx:{maxHeight:"70vh"},children:x?(0,t.jsx)(a.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:200},children:(0,t.jsx)(d.CircularProgress,{color:"inherit"})}):0===u.length?(0,t.jsx)(o.Typography,{color:"gray",textAlign:"center",children:"No hay ventas registradas hoy."}):(0,t.jsx)(n.Stack,{spacing:2,children:u.map(e=>(0,t.jsx)(l.Card,{sx:{bgcolor:"#2a2a2a",borderRadius:2,borderLeft:"5px solid #2196f3"},children:(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)(o.Typography,{variant:"subtitle1",fontWeight:"bold",children:e.product_name}),(0,t.jsxs)(o.Typography,{variant:"body2",children:["Cantidad: ",e.quantity]}),(0,t.jsxs)(o.Typography,{variant:"body2",children:["Total: $",Number(e.total).toFixed(2)]}),(0,t.jsx)(o.Typography,{variant:"caption",color:"gray",sx:{display:"block",mt:1},children:new Date(e.created_at).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"})})]})},e.id))})})]})]}):(0,t.jsx)(a.Box,{sx:{p:4,bgcolor:"#121212",color:"#fff"},children:(0,t.jsx)(o.Typography,{variant:"h6",color:"gray",children:"No se pudo cargar el resumen del dÃ­a."})})}function P({title:e,data:r,color:i}){return(0,t.jsx)(l.Card,{sx:{bgcolor:"#1e1e1e",borderRadius:3},children:(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)(o.Typography,{variant:"h6",fontWeight:"bold",children:e}),(0,t.jsx)(v,{sx:{my:1}}),(0,t.jsx)(n.Stack,{spacing:1,children:r.map(e=>(0,t.jsxs)(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,borderRadius:2,bgcolor:"#2a2a2a",borderLeft:`5px solid ${i}`,"&:hover":{bgcolor:"#333333"}},children:[(0,t.jsx)(o.Typography,{variant:"body2",sx:{fontWeight:500},children:e.supply_name}),(0,t.jsxs)(o.Typography,{variant:"body2",sx:{fontWeight:700},children:[Number(e.inventario_inicial??e.inventario_final??0).toFixed(2)," ",e.unit||""]})]},`${e.supply_id}-${e.inventario_inicial??e.inventario_final}`))})]})})}e.s(["default",()=>I],30204)}]);